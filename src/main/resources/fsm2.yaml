fsms:
  - name: MAIN
    init_state: DEVICE_INIT
    transitions:
      - from: DEVICE_INIT
        to: DEVICE_CONNECTING
        event: EV_READY_FOR_CONNECT
        action: set_max_values

      - from: DEVICE_CONNECTED
        to: CHECKING_CONNECTION
        action: connection


  - name: COLLECT
    init_state: CHECKING_COLLECTION
    transitions:
      - event: NONE
        from: CHECKING_COLLECTION
        to: CHECKING_CONNECTION
        action: checkingConnectionAction

  - name: CONNECT
    transitions:
      - from: DEVICE_CONNECTING
        to: CHECKING_CONNECTION
        action: checkingConnectionAction

      - event: EV_DEPLOYER_CONNECTED
        from: CHECKING_CONNECTION
        to: DEPLOYER_CONNECTED
        action: checkingConnectionAction

      - event: EV_COLLECTOR_CONNECTED
        from: CHECKING_CONNECTION
        to: COLLECTOR_CONNECTED
        action: checkingConnectionAction

      - event: EV_COLLECTOR_CONNECTED
        from: DEPLOYER_CONNECTED
        to: CONNECTED
        action: checkingConnectionAction

      - event: DEPLOYER_CONNECTED
        from: COLLECTOR_CONNECTED
        to: CONNECTED
        action: checkingConnectionAction

      - event: EV_COLLECTOR_CONNECTED
        from: DEPLOYER_CONNECTED
        to: CONNECTED
        action: checkingConnectionAction

      - from: CONNECTED
        to: DEVICE_CONNECTED